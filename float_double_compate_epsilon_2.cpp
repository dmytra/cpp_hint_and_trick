// Проверка равенства двух чисел с плавающей точкой (float или double) в C++
// https://t.me/easy_c_plus/111

/*
 Основные принципы проверки равенства

 1️⃣Использование эпсилон-значения:
 ✅Эпсилон-значение (epsilon) представляет собой небольшую величину, которая определяет допустимую разницу между двумя числами с плавающей точкой. Два числа считаются равными, если их абсолютная разница меньше эпсилон-значения.

 2️⃣Абсолютная и относительная разница:
 ✅Абсолютная разница может быть достаточной для чисел вблизи нуля.
 ✅Относительная разница лучше подходит для чисел, которые могут быть как большими, так и малыми.
 */

#include <cmath>
#include <iostream>

// Функция для проверки равенства двух чисел с плавающей точкой
bool almostEqualRelative(float a, float b, float epsilon = 1e-5f) {
    float diff = std::fabs(a - b);
    a = std::fabs(a);
    b = std::fabs(b);
    float largest = (b > a) ? b : a;

    return diff <= largest * epsilon;
}

int main() {
    float x = 1000.0f * 1.00001f; // x должно быть примерно равно 1000.01
    float y = 1000.01f;

    if (almostEqualRelative(x, y)) {
        std::cout << "x и y примерно равны." << std::endl;
    } else {
        std::cout << "x и y не равны." << std::endl;
    }

    return 0;
}



